# This is a basic workflow to help you get started with Actions

name: Deploy

# Controls when the action will run. 
on:
  # Triggers the workflow on push or pull request events but only for the v1 branch
  push:
    branches:
      - deployment
  pull_request:
    branches:
      - deployment

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  deploy-autolab:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
      - name: Deploy with SSH
        uses: fifsky/ssh-action@v0.0.5
        with:
          # Command to execute on the remote server.
          command: |
            dts version
          # Hostname or IP address of the server.
          host: 5.19.248.97
          # Username for authentication.
          user: jass
          # Port number of the server.
          port: 2222
          # String that contains a private key for either key-based or hostbased user authentication (OpenSSH format)
          key: ${{ secrets.SSH_KEY }}
      #- name: Deployment trigger to Autolab server
      #  uses: appleboy/ssh-action@master
      #  with:
      #    host: 5.19.248.97
      #    port: 2222
      #    username: jass
      #    key: ${{ secrets.SSH_KEY }}
      #    script: dts version
